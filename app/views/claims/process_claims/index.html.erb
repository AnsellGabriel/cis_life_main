<%= content_tag :h4, 'List of Claims', class:"text-primary" %>
<div class="<%= flex_justify_align('between', 'center') %> mb-3">
  <div class="text-end">
    <%= search_form_for @q do |f| %>
      <div class="form-group d-flex justify-content-end gap-1">
        <%= f.text_field :coop_member_full_name_cont, class: 'form-control', placeholder: 'Search full name' %>
        <%= button_tag(type: 'submit', class: small_btn('warning'), style: "width: 40px") do %>
          <i class='bi bi-search'></i>
        <% end %>
      </div>
    <% end %>
  </div>
  <%== pagy_bootstrap_nav(@pagy) %>
</div>

<table class="table table-striped table-bordered table-hover">
  <thead>
    <tr>
      <th>#</th>
      <th>Details</th>
      <th>Insurance</th>
      <%# <th>Batch</th> %>
      <%# <th>Date Incident</th>
        <th>Entry Type</th> %>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @process_claims.each do |process_claim| %>
      <tr>
        <th scope="row"><%= process_claim.id %></th>
        <td><strong><%= process_claim.coop_member&.get_fullname %></strong> <br>
          <%= process_claim.cooperative %> <br>
          <small><%= process_claim.agreement.agent %></small> <br>
          <small>
            <%= content_tag :span, process_claim.entry_type.titleize, class: "badge rounded-pill text-bg-light"  %>
            <%= content_tag :span, process_claim.display_route(process_claim.claim_route) , class: "badge rounded-pill text-bg-light" %>
            <% if process_claim.denied? || process_claim.reconsider_denied? %>
              <span class="badge rounded-pill bg-danger text-light"><%= process_claim.status.humanize %></span>
            <% elsif process_claim.approved? || process_claim.reconsider_approved? %>
              <span class="badge rounded-pill bg-success text-light"><%= process_claim.status.humanize %></span>
            <% elsif process_claim.pending? %>
              <span class="badge rounded-pill bg-warning text-dark"><%= process_claim.status.humanize %></span>
            <% else %>
              <span class="badge rounded-pill bg-primary text-light"><%= process_claim.status.humanize %></span>
            <% end %>
          </small>
        </td>
        <td><strong><%= process_claim.agreement.plan %></strong> <br>
          <%= content_tag :small, process_claim.claim_type %> <br>
          <small>Date Incident: <%= to_shortdate(process_claim.date_incident) %></small> <br>
          <%= content_tag :small, "Date Filed: #{to_shortdate(process_claim.date_file)}" unless process_claim.date_file.nil? %></td>
        <%# <td><%= process_claim.batch %>
        <td>
          <%= render 'index_link', p: process_claim %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
